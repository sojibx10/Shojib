const axios = require("axios"); module.exports.config = { name: "album", version: "1.0.0", hasPermission: 0, credits: "Shaon √ó Ullash (modded)", description: "Send a video from specific category via album API", commandCategory: "media", usages: "", cooldowns: 5 }; module.exports.run = async function({ event, api }) { const menu = ` ‚ï≠‚îÄ‚îÄ‚îÄ üé• ùô∞ùôªùô±ùöÑùôº ùöÖùô∏ùô≥ùô¥ùôæ ‚îÄ‚îÄ‚îÄ‚ïÆ 1Ô∏è‚É£ Islamic 2Ô∏è‚É£ Anime 3Ô∏è‚É£ Shairi 4Ô∏è‚É£ Short 5Ô∏è‚É£ Sad 6Ô∏è‚É£ Status 7Ô∏è‚É£ Football 8Ô∏è‚É£ Funny 9Ô∏è‚É£ Love üîü CPL 1Ô∏è‚É£1Ô∏è‚É£ Baby 1Ô∏è‚É£2Ô∏è‚É£ Free Fire 1Ô∏è‚É£3Ô∏è‚É£ Lofi 1Ô∏è‚É£4Ô∏è‚É£ Happy 1Ô∏è‚É£5Ô∏è‚É£ Humayun Sir üîÅ Reply a number to get video. `; return api.sendMessage(menu, event.threadID, (err, info) => { global.client.handleReply.push({ name: module.exports.config.name, messageID: info.messageID, author: event.senderID, type: "choose" }); }, event.messageID); }; module.exports.handleReply = async function({ api, event, handleReply }) { if (event.senderID !== handleReply.author) return; const categories = { "1": "islamic", "2": "anime", "3": "shairi", "4": "short", "5": "sad", "6": "status", "7": "football", "8": "funny", "9": "love", "10": "cpl", "11": "baby", "12": "ff", "13": "lofi", "14": "happy", "15": "humayun" }; const choice = event.body.trim(); const selectedCategory = categories[choice]; if (!selectedCategory) { return api.sendMessage("‚ùå Invalid choice. Please reply with a number from the menu.", event.threadID, event.messageID); } try { const apiUrl = `http://194.164.125.5:6190/album?type=${selectedCategory}`; const response = await axios.get(apiUrl); const videoUrl = response.data.data; if (!videoUrl) throw new Error("No video returned"); const videoStream = (await axios.get(videoUrl, { responseType: "stream" })).data; return api.sendMessage({ body: `‚úÖ Here's your ${selectedCategory} video üé•`, attachment: videoStream }, event.threadID, event.messageID); } catch (err) { console.error("Video fetch error:", err.message); return api.sendMessage("‚ùå Failed to fetch video. Try again later.", event.threadID, event.messageID); } };